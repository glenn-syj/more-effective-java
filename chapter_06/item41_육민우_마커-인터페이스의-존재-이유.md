# λ§μ»¤ μΈν„°νμ΄μ¤μ μ΅΄μ¬ μ΄μ 



## item41 - μ •μν•λ ¤λ” κ²ƒμ΄ νƒ€μ…μ΄λΌλ©΄ λ§μ»¤ μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λΌ

### π” λ‚΄μ© μ”μ•½

**μ•„λ¬΄ λ©”μ„λ“λ„ λ‹΄κ³  μμ§€ μ•κ³ , λ‹¨μ§€ μμ‹ μ„ κµ¬ν„ν•λ” ν΄λμ¤κ°€ νΉμ • μ†μ„±μ„ κ°€μ§μ„ ν‘μ‹ν•΄μ£Όλ” μΈν„°νμ΄μ¤λ¥Ό λ§μ»¤ μΈν„°νμ΄μ¤(marker interface)λΌ ν•λ‹¤.**
μΆ‹μ€ μλ” Serializable μΈν„°νμ΄μ¤λ΅ Serializable μΈν„°νμ΄μ¤λ” μμ‹ μ„ κµ¬ν„ν• ν΄λμ¤μ μΈμ¤ν„΄μ¤λ” ObjectOutputStreamμ„ ν†µν•΄ μ“Έ(write) μ μλ‹¤κ³ , μ¦‰ μ§λ ¬ν™”(serialization)ν•  μ μλ‹¤κ³  μ•λ ¤μ¤€λ‹¤. 

λ‹¤μμ€ Serializable μΈν„°νμ΄μ¤μ λ‚΄λ¶€ μ½”λ“μ΄λ‹¤.(μ •λ§ μ•„λ¬΄κ²ƒλ„ μ—†λ‹¤) 

```java
public interface Serializable {
}
```

Cloneable μΈν„°νμ΄μ¤ μ—­μ‹ λ‚΄λ¶€μ— μ•„λ¬΄κ²ƒλ„ μ—†μ–΄μ„ λ§μ»¤ μΈν„°νμ΄μ¤λ΅ μƒκ°λλ”λ° item13 p.77μ—μ„λ” mixin interfaceλΌλ” ν‘ν„μ„ μ‚¬μ©ν–λ‹¤. 

```java
public interface Cloneable {
}
```

λ§μ»¤ μ• λ„ν…μ΄μ…(item 39)μ΄ λ“±μ¥ν•λ©΄μ„ λ§μ»¤ μΈν„°νμ΄μ¤λ” κµ¬μ‹μ΄ λμ—λ‹¤λ” μ΄μ•ΌκΈ°κ°€ μλ”λ° μ΄λ” μ‚¬μ‹¤μ΄ μ•„λ‹λ©° λ§μ»¤ μΈν„°νμ΄μ¤λ” λ§μ»¤ μ• λ„ν…μ΄μ…λ³΄λ‹¤ λ‚μ€ λ‘ κ°€μ§€ μ¥μ μ΄ μλ‹¤. 

<br>

1. λ§μ»¤ μΈν„°νμ΄μ¤λ” μ΄λ¥Ό κµ¬ν€ν• ν΄λμ¤μ μΈμ¤ν„΄μ¤λ“¤μ„ κµ¬λ¶„ν•λ” νƒ€μ…μΌλ΅ μ“Έ μ μμΌλ‚, λ§μ»¤ μ• λ„ν…μ΄μ…μ€ κ·Έλ ‡μ§€ μ•λ‹¤.
2. μ μ© λ€μƒμ„ λ” μ •λ°€ν•κ² μ§€μ •ν•  μ μλ‹¤.

<br>

λ°λ©΄ λ§μ»¤ μ• λ„ν…μ΄μ…μ€ κ±°λ€ν• μ• λ„ν…μ΄μ… μ‹μ¤ν…μ μ§€μ›μ„ λ°›λ”λ‹¤λ” μ μ—μ„ λ§μ»¤ μΈν„°νμ΄μ¤λ³΄λ‹¤ λ‚μ€ μ λ„ μλ‹¤. 

κ·Έλ ‡λ‹¤λ©΄ λ§μ»¤ μ• λ„ν…μ΄μ…κ³Ό λ§μ»¤ μΈν„°νμ΄μ¤ μ¤‘ μ–΄λ–¤ κ²ƒμ„ μ‚¬μ©ν•΄μ•Όν• μ§€ κ³ λ―Όμ„ ν•κ² λλ”λ°, **μƒλ΅ μ¶”κ°€ν•λ” λ©”μ„λ“ μ—†μ΄ λ‹¨μ§€ νƒ€μ… μ •μκ°€ λ©μ μ΄λΌλ©΄ λ§μ»¤ μΈν„°νμ΄μ¤λ¥Ό μ„ νƒ**ν•λ©΄ λλ‹¤. 
ν΄λμ¤λ‚ μΈν„°νμ΄μ¤ μ™Έμ ν”„λ΅κ·Έλ¨ μ”μ†μ— λ§ν‚Ήν•΄μ•Ό ν•κ±°λ‚, μ• λ„ν…μ΄μ…μ„ μ κ·Ή ν™μ©ν•λ” ν”„λ μ„μ›ν¬μ μΌλ¶€λ΅ κ·Έ λ§μ»¤λ¥Ό νΈμ…μ‹ν‚¤κ³ μ ν•λ‹¤λ©΄ λ§μ»¤ μ• λ„ν…μ΄μ…μ΄ μ¬λ°”λ¥Έ μ„ νƒμ΄λ‹¤. 
μ μ© λ€μƒμ΄ ElementType.TYPEμΈ λ§μ»¤ μ• λ„ν…μ΄μ…μ„ μ‘μ„±ν•κ³  μλ‹¤λ©΄, μ μ‹ μ—¬μ λ¥Ό κ°–κ³  λ§μ»¤ μ• λ„ν…μ΄μ…κ³Ό λ§μ»¤ μΈν„°νμ΄μ¤ μ¤‘ μ–΄λ–¤ κ²ƒμ΄ λ‚μ„μ§€ κ³ λ―Όν•΄λ³΄μ. 

<br>

--------------------------------------------------

### π§ μ‹¬ν™” νƒκµ¬

κµμ¬μ κ°λ…μ„ ν•™μµν•λ©΄μ„ μ•„λ¬΄κ²ƒλ„ μ—†λ” λ§μ»¤ μΈν„°νμ΄μ¤κ°€ λ¬΄μ¨ μλ―Έκ°€ μλ‚λΌλ” μƒκ°μ΄ λ“¤μ—λ‹¤. μ¶”κ°€λ΅ λ§μ»¤ μΈν„°νμ΄μ¤λ” λ‚΄λ¶€μ— μ•„λ¬΄ λ‚΄μ©λ„ μ—†λ”λ° κ·Έλƒ¥ κµ¬ν„ν–λ‹¤κ³  implementλ¥Ό ν•΄λ„ μ»΄νμΌ μ—λ¬κ°€ λ°μƒν•μ§€ μ•λ”λ° μ¤νλ ¤ λ¬Έμ κ°€ λ°μƒν•  μ—¬μ§€κ°€ μλ” κ²ƒμ€ μ•„λ‹κ°€ μ‹¶μ—λ‹¤. κ·Έλμ„ λ§μ»¤ μΈν„°νμ΄μ¤κ°€ μ–΄λ–¤ ν™μ©λ„κ°€ μμ„μ§€ μ•μ•„λ³΄λ” κ²ƒμ„ μ‹¬ν™” νƒκµ¬μ μ£Όμ λ΅ μ„ μ •ν–λ‹¤. 



ν•„μκ°€ μ²« λ²μ§Έ μ¥μ μΌλ΅ μ†κ°ν• **λ§μ»¤ μΈν„°νμ΄μ¤λ” μ΄λ¥Ό κµ¬ν„ν• ν΄λμ¤μ μΈμ¤ν„΄μ¤λ“¤μ„ κµ¬λ¶„ν•λ” νƒ€μ…μΌλ΅ μ“Έ μ μμΌλ‚, λ§μ»¤ μ• λ„ν…μ΄μ…μ€ κ·Έλ ‡μ§€ μ•λ‹¤.** μ΄ λ¶€λ¶„μ€ μ–Όν• μ¥μ μ΄ λ  μ μμ„ κ²ƒμΌλ΅ λ³΄μ€λ‹¤. λ§μ»¤ μ• λ„ν…μ΄μ…μ€ λ¶κ°€λ¥ν•λ‹¤λ” μ μ„(μ•μΌλ΅λ„ λ¶κ°€λ¥ν•μ§€ μ—¬λ¶€) ν™•μ‹¤ν μ΄ν•΄ν•μ§€λ” λ»ν–μ§€λ§, λ§μ»¤ μΈν„°νμ΄μ¤λ” κ·Έλƒ¥ μΈν„°νμ΄μ¤μ΄λ―€λ΅ μ΄λ¥Ό κµ¬ν„ν• ν΄λμ¤λ“¤μ€ λ§μ»¤ μΈν„°νμ΄μ¤ νƒ€μ…μΌλ΅ κµ¬λ¶„μ΄ κ°€λ¥ν•κΈ° λ•λ¬Έμ— κΈ°λ¥μ ν™•μ¥ νΉμ€ μ ν•μ κ°λ…μΌλ΅ μ‚¬μ©ν•  μ μμ„ κ²ƒ κ°™λ‹¤. μ΄μ— λ€ν•΄ κµ¬μ²΄μ μΈ μ•„μ΄λ””μ–΄κ°€ μ λ– μ¤λ¥΄μ§€ μ•μ•„μ„ ChatGPTμ—μ„ ObjectOutputStream μ μ‚¬μ©λ²•μ— λ€ν• μ½”λ“λ¥Ό λ°›μ•„μ„ κ°€κ³µν•΄μ„ μ‚¬μ©ν–λ‹¤. 

```java
package item41;

import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.ObjectOutputStream;
import java.io.Serializable;
import java.util.Arrays;

public class Test {

    // Serializableμ„ κµ¬ν„ν•μ§€ μ•μ€ ν΄λμ¤
    static class Node1 {
        int v = 1;
    }

    // Serializableμ„ κµ¬ν„ν• ν΄λμ¤
    static class Node2 implements Serializable {
        int v = 2;
    }

    public static void main(String[] args) throws IOException {

        Node1 node1 = new Node1();
        Node2 node2 = new Node2();

        ByteArrayOutputStream baos1 = new ByteArrayOutputStream();
        ByteArrayOutputStream baos2 = new ByteArrayOutputStream();

        ObjectOutputStream oos1 = new ObjectOutputStream(baos1);
        ObjectOutputStream oos2 = new ObjectOutputStream(baos2);

//        oos1.writeObject(node1);  // NotSerializableException λ°μƒ
        oos2.writeObject(node2);  // μ§λ ¬ν™” μ„±κ³µ
        
        // μ¶λ ¥ μ„±κ³µ
        System.out.println(Arrays.toString(baos2.toByteArray()));
    }
}
```

μ£Όμ„μ λ‚΄μ©μ²λΌ `implements Serializable` μ΄ μ½”λ“λ¥Ό λ„£μ€ κ²ƒλ§μΌλ΅ Node ν΄λμ¤κ°€ μ§λ ¬ν™”κ°€ λμ–΄μ„ μ΄λ¬λ©΄ λ¬΄μ¨ μλ―Έκ°€ μλ‚ μ‹¶μ—λ”λ°, μ¤νλ ¤ `implements Serializable` λ¥Ό λ„£μ§€ μ•μΌλ©΄ μ§λ ¬ν™”κ°€ λμ§€ μ•μ•„μ„ μ§λ ¬ν™”λ¥Ό ν•κ³  μ‹¶μ§€ μ•μ€(νΉμ€ ν•λ©΄ μ•λλ”) κ°μ²΄μ— λ€ν•΄ μ§λ ¬ν™”λ¥Ό κΈ°λ³Έμ μΌλ΅ λ§‰λ”λ‹¤λ” λ‹µλ³€μ„ λ°›μ•λ‹¤. 

μ΄μ— λ€ν•΄ μ λ²• ν•©λ¦¬μ μ΄λΌκ³  λκΌλ”λ°, μ•κ³ λ¦¬μ¦ ν•™μµ κ³Όμ •μ—μ„λ„ μ‚¬μ©μκ°€ μ •μν• ν΄λμ¤μ— λ€ν•΄ μΈμ¤ν„΄μ¤κ°„μ λΉ„κµλ¥Ό μ„ν•΄ `Comparable` μ„ μ‚¬μ©ν•λ”λ° `Comparable` μ—†μ΄λ„ κ°μ²΄κ°„μ λΉ„κµκ°€ κΈ°λ³Έμ μΌλ΅ μ κ³µλλ©΄ μ¤νλ ¤ λ°νƒ€μ„μ— λ²„κ·Έλ¥Ό μ°ΎκΈ° μ–΄λ ¤μΈ κ²ƒμΌλ΅ μƒκ°μ΄ λμ—λ‹¤. 

--------------------------------------------------

μ¶μ²

https://docs.oracle.com/javase/8/docs/api/

ChatGPT

--------------------------------------------------

### π§  μ–΄λ ¤μ› λ μ 

λ§μ»¤ μΈν„°νμ΄μ¤μ κ²½μ° μλ°”κ°€ κΈ°λ³Έμ μΌλ΅ μ κ³µν•λ” λ§μ»¤ μΈν„°νμ΄μ¤λ¥Ό κ°λ°μκ°€ `implements` ν• μ§€ μ—¬λ¶€λ¥Ό κ²°μ •ν•λ” κ²ƒμ΄ μ¤‘μ”ν•΄λ³΄μ€λ”λ°, κ°λ°μκ°€ λ§μ»¤ μΈν„°νμ΄μ¤λ¥Ό κµ³μ΄ μ •μν•΄μ„ ν™μ©ν•  ν•„μ”κ°€ μμ„μ§€ κ³ λ―Όμ΄ λμ—λ”λ° ν•΄λ‹µμ„ μ–»κΈ° μ–΄λ ¤μ› λ‹¤. 
